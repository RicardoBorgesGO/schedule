<div class="breadcrumbs" ncy-breadcrumb></div>

<div layout="column" ng-cloak class="md-inline-form">
    <md-card>
        <md-toolbar class="md-table-toolbar md-default">
            <div class="md-toolbar-tools">
                <span>Evento</span>
                <div flex></div>
            </div>
        </md-toolbar>

        <div layout-padding>
            <form name="queryUserForm" ng-submit="queryUserForm.$valid && $ctrl.save()">
                <div layout-gt-xs="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Nome</label>
                        <input ng-model="$ctrl.event.nome" placeholder="Nome do evento" maxlength="120">
                    </md-input-container>
                </div>

                <div layout-gt-xs="row">
                    <div flex-gt-sm>
                        <md-date-range-picker
                                date-start="$ctrl.dataInicial"
                                date-end="$ctrl.dataFinal"
                                selected-template-name="selectedRange.selectedTemplateName"
                                selected-template="selectedRange.selectedTemplate"
                                show-template="false"
                                first-day-of-week="0"
                                disable-templates="TW"
                                one-panel="true"
                                custom-templates="mdCustomTemplates"
                        ></md-date-range-picker>
                    </div>


                    <div ng-repeat="interval in $ctrl.getNumber($ctrl.intervalDate) track by $index" flex-gt-sm>
                        <md-input-container flex-gt-sm>
                            <label>Horário inicial</label>
                            <input ng-model="$ctrl.timeInicial['data' + $index]" type="time">
                        </md-input-container>

                        <md-input-container flex-gt-sm>
                            <label>Horário final</label>
                            <input ng-model="$ctrl.timeFinal['data' + $index]" type="time">
                        </md-input-container>
                    </div>
                </div>

                <div layout-gt-xs="row">
                    <md-input-container class="md-block" flex-gt-sm>
                        <label>Intevalo</label>
                        <input ng-model="$ctrl.event.intervalo" placeholder="Intervalo de tempo" type="number">
                    </md-input-container>
                </div>

                <md-table-container>
                    <table md-table ng-model="selected" md-progress="properties">
                        <thead md-head>
                        <tr md-row>
                            <th md-column>#</th>
                            <th md-column>Usuário</th>
                            <th md-column>Configuração</th>
                        </tr>
                        </thead>
                        <tbody md-body>
                        <tr md-row ng-repeat="usuario in $ctrl.event.usuarios">
                            <td md-cell>
                                {{usuario.id}}
                            </td>
                            <td md-cell>
                                {{usuario.email}}
                            </td>
                            <td md-cell>
                                <md-button class="md-icon-button" aria-label="Editar usuário" ng-click="$ctrl.go(query.Query.id)">
                                    <md-icon>mode_edit</md-icon>
                                </md-button>

                                <md-button class="md-icon-button" aria-label="Remover usuário" ng-click="$ctrl.remove(query.Query.id)">
                                    <md-icon>delete</md-icon>
                                </md-button>
                            </td>
                        </tr>
                        <tr md-row ng-if="$ctrl.querys.length < 1">
                            <td md-cell colspan="6">Não existem registros cadastrados.</td>
                        </tr>
                        </tbody>
                    </table>
                    <div layout="row" layout-align="end end">
                        <div flex></div>
                        <md-button class="md-fab md-mini md-primary" ng-click="$ctrl.showAddUsuarioDialog()">
                            <md-icon>add</md-icon>
                        </md-button>
                    </div>
                </md-table-container>


                <md-button type="submit" class="md-raised md-primary" ng-disabled="queryUserForm.$invalid">
                    <md-icon ng-bind="'save'"></md-icon> Salvar
                </md-button>

            </form>
        </div>
    </md-card>
</div>